---
title: "Sidenote with Code Block"
papersize: us-letter
reference-location: margin
format:
  html: default
  typst:
    keep-typ: true
_quarto:
  tests:
    typst:
      ensureTypstFileRegexMatches:
        # Show rule transforms footnotes to sidenotes; Pandoc outputs #footnote natively
        - ['#show footnote:', 'column-sidenote', '#footnote']
        - []
      ensurePdfRegexMatches:
        - ['CODE-NOTE', 'def hello']
        - []
      ensurePdfTextPositions:
        - - subject: "CODE-NOTE"
            relation: rightOf
            object: "Main text"
        - []
      noErrors: default
---

Main text with a footnote containing code[^code].

[^code]: CODE-NOTE: Here is some Python code:

    ```python
    def hello():
        return "world"
    ```

    The code block should appear in the margin sidenote.

More main text continues here after the sidenote.
